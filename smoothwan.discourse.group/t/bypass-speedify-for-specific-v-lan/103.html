<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from smoothwan.discourse.group/t/bypass-speedify-for-specific-v-lan/103 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Dec 2024 17:51:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Bypass Speedify for specific (V)LAN - Help - SmoothWAN Forum</title>
    <meta name="description" content="Hi, 
I followed the instructions in Bypass clients to a specific WAN - SmoothWAN to bypass a specific LAN (VLAN actually) to a specific WAN interface. 
The issue I ran into is one I did that, that WAN is removed from the&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 35656a1d5fe86f4aa14a60a44de2c0d1f6a41215">
<link rel="icon" type="image/png" href="../../../canada1.discourse-cdn.com/free1/uploads/smoothwan/optimized/1X/3613a64d67b74a57a3b28c01cd298fd2c723dd92_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../../canada1.discourse-cdn.com/free1/uploads/smoothwan/optimized/1X/3613a64d67b74a57a3b28c01cd298fd2c723dd92_2_180x180.png">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#f9fcff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="103.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="SmoothWAN Forum Search">

    <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/color_definitions_base__1_2fd08b630e2e173ecc4d9090eb26db3f182aabf9.css_%3b%20filename_%3dUTF-8%27%27color_definitions_base__1_2fd08b630e2e173ecc4d9090eb26db3f182aab?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" class="light-scheme"/><link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/color_definitions_air-light-s_12_1_97cd8256f1ca62566a4a716f4c69270b98f87c48.css_%3b%20filename_%3dUTF-8%27%27color_definitions_air-light-s_12_1_97cd8256f1ca62566a4a?__ws=smoothwan.discourse.group" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/checklist_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27checklist_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-adplugin_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-adplugin_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-adplugin"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-ai_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-ai_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-ai"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-akismet_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-akismet_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-akismet"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-cakeday_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-details_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-details_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-lazy-videos_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.c?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-local-dates_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.c?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-narrative-bot_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e4?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-presence_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-reactions_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-reactions_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-reactions"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-solved_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-solved"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/footnote_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27footnote_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/hosted-site_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27hosted-site_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="hosted-site"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/poll_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27poll_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="poll"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/spoiler-alert_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27spoiler-alert_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-ai_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-ai_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-ai_desktop"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/discourse-reactions_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27discourse-reactions_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca64?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="discourse-reactions_desktop"  />
  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/poll_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_9258ead2aa7dc7a96ffe0b2089a5b7ca643a4781e41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../../yyz2.discourse-cdn.com/free1/stylesheets/desktop_theme_1_1653767a2120603d38aafab509834c0911dfda5f.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_1_1653767a2120603d38aafab509834c0911dfda5fe41b.css?__ws=smoothwan.discourse.group" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Bypass Speedify for specific (V)LAN&#39;" href="103.rss" />
    <meta property="og:site_name" content="SmoothWAN Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="../../../canada1.discourse-cdn.com/free1/uploads/smoothwan/original/1X/3613a64d67b74a57a3b28c01cd298fd2c723dd92.png" />
<meta property="og:image" content="../../../canada1.discourse-cdn.com/free1/uploads/smoothwan/original/1X/3613a64d67b74a57a3b28c01cd298fd2c723dd92.png" />
<meta property="og:url" content="103.html" />
<meta name="twitter:url" content="103.html" />
<meta property="og:title" content="Bypass Speedify for specific (V)LAN" />
<meta name="twitter:title" content="Bypass Speedify for specific (V)LAN" />
<meta property="og:description" content="Hi,  I followed the instructions in Bypass clients to a specific WAN - SmoothWAN to bypass a specific LAN (VLAN actually) to a specific WAN interface.  The issue I ran into is one I did that, that WAN is removed from the “main” routing table, and so when I deactivate Speedify the traffic is forced over the other WAN (which in my case is the less desirable WAN interface).  Once I setup the bypass as instructed, this is what I ended up with:  root@SmoothWAN:~# ip rule 0:      from all lookup local..." />
<meta name="twitter:description" content="Hi,  I followed the instructions in Bypass clients to a specific WAN - SmoothWAN to bypass a specific LAN (VLAN actually) to a specific WAN interface.  The issue I ran into is one I did that, that WAN is removed from the “main” routing table, and so when I deactivate Speedify the traffic is forced over the other WAN (which in my case is the less desirable WAN interface).  Once I setup the bypass as instructed, this is what I ended up with:  root@SmoothWAN:~# ip rule 0:      from all lookup local..." />
<meta property="og:article:section" content="Help" />
<meta property="og:article:section:color" content="94f5ce" />
<meta property="article:published_time" content="2023-10-18T06:25:37+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Bypass Speedify for specific (V)LAN","mainEntity":{"@type":"Question","name":"Bypass Speedify for specific (V)LAN","text":"Hi,\n\nI followed the instructions in <a href=\"https://smoothwan.com/wanbyp/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Bypass clients to a specific WAN - SmoothWAN<\/a> to bypass a specific LAN (VLAN actually) to a specific WAN interface.\n\nThe issue I ran into is one I did that, that WAN is removed from the “main” routing table, and so when I deactivate Speedify the traffic is forced o&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2023-10-18T06:25:37.266Z","author":{"@type":"Person","name":"timirvin","url":"https://smoothwan.discourse.group/u/timirvin"}}}</script>
  </head>
  <body class="crawler ">
    
    <header>
  <a href="../../index.html">
    SmoothWAN Forum
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="103.html">Bypass Speedify for specific (V)LAN</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/help/4.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #94f5ce'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Help</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Bypass Speedify for specific (V)LAN'>
      <link itemprop='url' href='103.html'>
      <meta itemprop='datePublished' content='2023-10-18T06:25:37Z'>
        <meta itemprop='articleSection' content='Help'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='SmoothWAN Forum'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='../../../canada1.discourse-cdn.com/free1/uploads/smoothwan/original/1X/6375c8796e6998ed686c6f7039ade6edea006f54.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/timirvin'><span itemprop='name'>timirvin</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="103.html">


              <span class="crawler-post-infos">
                  <time  datetime='2023-10-18T06:25:37Z' class='post-time'>
                    October 18, 2023,  6:25am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T06:25:37Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi,</p>
<p>I followed the instructions in <a href="https://smoothwan.com/wanbyp/" class="inline-onebox" rel="noopener nofollow ugc">Bypass clients to a specific WAN - SmoothWAN</a> to bypass a specific LAN (VLAN actually) to a specific WAN interface.</p>
<p>The issue I ran into is one I did that, that WAN is removed from the “main” routing table, and so when I deactivate Speedify the traffic is forced over the other WAN (which in my case is the less desirable WAN interface).</p>
<p>Once I setup the bypass as instructed, this is what I ended up with:</p>
<pre><code class="lang-auto">root@SmoothWAN:~# ip rule
0:      from all lookup local
1:      from 10.26.11.0/24 iif br-lan.2 lookup BYP1
5210:   from all fwmark 0x80000/0xff0000 lookup main
5230:   from all fwmark 0x80000/0xff0000 lookup default
5250:   from all fwmark 0x80000/0xff0000 unreachable
5270:   from all lookup 52
10000:  from 100.98.168.38 lookup BYP1
20000:  from all to 100.98.168.38/10 lookup BYP1
32766:  from all lookup main
32767:  from all lookup default
90010:  from all iif lo lookup BYP1
root@SmoothWAN:~# ip route
0.0.0.0/1 dev connectify0 scope link
default via 10.202.0.1 dev connectify0 proto static
default via 100.65.134.17 dev wwan0 proto static src 100.65.134.16 metric 20
10.26.10.0/24 dev br-lan.1 proto kernel scope link src 10.26.10.1
10.26.11.0/24 dev br-lan.2 proto kernel scope link src 10.26.11.1
10.202.0.0/24 dev connectify0 proto kernel scope link src 10.202.0.2
100.65.134.0/27 dev wwan0 proto static scope link metric 20
123.123.123.123 via 100.65.134.17 dev wwan0
128.0.0.0/1 dev connectify0 scope link
root@SmoothWAN:~# ip route list table BYP1
default via 100.64.0.1 dev eth0 proto static src 100.98.168.38 metric 10
34.120.255.244 dev eth0 proto static scope link src 100.98.168.38 metric 10
100.64.0.0/10 dev eth0 proto static scope link metric 10
192.168.100.1 dev eth0 proto static scope link src 100.98.168.38 metric 10
root@SmoothWAN:~#
</code></pre>
<p>You can see that the route via “eth0” has disappeared from the “main” routing table and only appears in the “BYP1” table.</p>
<p>So, if I deactivate Speedify this is what the “main” table now looks like:</p>
<pre><code class="lang-auto">root@SmoothWAN:~# ip route
default via 100.65.134.17 dev wwan0 proto static src 100.65.134.16 metric 20
10.26.10.0/24 dev br-lan.1 proto kernel scope link src 10.26.10.1
10.26.11.0/24 dev br-lan.2 proto kernel scope link src 10.26.11.1
100.65.134.0/27 dev wwan0 proto static scope link metric 20
123.123.123.123 via 100.65.134.17 dev wwan0
</code></pre>
<p>So all traffic is now heading out “wwan0”.  In this case, I’d like traffic in “main” and “BYP1” tables to both use “eth0” and “wwan0” is relegated to “metric 20” and ostensibly unused.</p>
<p>Tim</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/TalalM'><span itemprop='name'>TalalM</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-21T06:33:37Z' class='post-time'>
                    October 21, 2023,  6:33am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-21T06:33:37Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>If I understand correctly, you want to failover to interfaces other than wwan0 in case Speedify is off?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/timirvin'><span itemprop='name'>timirvin</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-21T07:11:58Z' class='post-time'>
                    October 21, 2023,  7:11am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-21T07:11:58Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is what I am trying to do:</p>
<p>I have 2 WANs:<br>
eth0 == Starlink<br>
wwan0 == Cellular backup</p>
<p>Speedify is configured to use “eth0” primarily but to failover to “wwan0” if Starlink is out (or blocked by a tree).</p>
<p>My “main” routing table (before implementing the bypass from your wiki) was:</p>
<pre><code class="lang-auto">default via 10.202.0.1 dev connectify0 proto static
default via 100.64.0.1 dev eth0 proto static src 100.98.168.38 metric 10
default via 100.70.233.128 dev wwan0 proto static src 100.70.233.127 metric 20
</code></pre>
<p>So when Speedify is turned off, the traffic will flow via eth0 to Starlink.  It turns out I have many sites I access that don’t like Speedify, so I have had to turn it off more than I expected.</p>
<p>One such site is Netflix, and the Speedify internal bypass isn’t working for that, so I decided to put the TVs on a separate VLAN and use the <a href="https://smoothwan.com/wanbyp/" class="inline-onebox" rel="noopener nofollow ugc">Bypass clients to a specific WAN - SmoothWAN</a> instructions to send them out Starlink (eth0) all the time (bypassing Speedify).</p>
<p>When I implemented the bypass procedure from the wiki, the route to eth0 disappeared from the “main” routing table, so now, when I turn off Speedify, the traffic flows out wwan0 instead of eth0.</p>
<p>I was able to fix this by manually running an <code>ip route add</code> command and adding that route back in.  But ideally, the bypass wouldn’t remove the route from the “main” table when it added it to the “BYP1” table.</p>
<p>Hopefully, that is more clear.</p>
<p>Thanks for your help.</p>
<p>Tim</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/timirvin'><span itemprop='name'>timirvin</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-10T17:52:02Z' class='post-time'>
                    December 10, 2023,  5:52pm
                  </time>
                  <meta itemprop='dateModified' content='2023-12-10T17:52:02Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi checking back in on this issue.  I haven’t found a way to consistently get the eth0 route added back into the routing take after following the <a href="https://smoothwan.com/wanbyp/" rel="noopener nofollow ugc">Bypass clients to a specific WAN - SmoothWAN</a> instructions to create a bypass for a 2nd VLAN on network.</p>
<p>The other side effect of this issue is that when this route is missing, Speedify uses my wwan0 route (cellular) for it’s bypass traffic, which has resulted in slow connections (and expensive cell bills).</p>
<p>I tried putting an <code>ip route add...</code> in /etc/rc.local but tht isn’t working.  If cron was running I’d just have it try to add the route every few minutes to make sure it’s in place.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/timirvin'><span itemprop='name'>timirvin</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-10T18:25:28Z' class='post-time'>
                    December 10, 2023,  6:25pm
                  </time>
                  <meta itemprop='dateModified' content='2023-12-10T18:25:28Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Actually, I just figured out how to run the route add in cron, so iI have a workaround for now.  If you come up with a fix for the <a href="https://smoothwan.com/wanbyp/" rel="noopener nofollow ugc">Bypass clients to a specific WAN - SmoothWAN</a> instructions let me know, but otherwise I am set for now.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/velocity7'><span itemprop='name'>velocity7</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-10T23:10:37Z' class='post-time'>
                    December 10, 2023, 11:10pm
                  </time>
                  <meta itemprop='dateModified' content='2023-12-11T01:01:45Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Curious if you have full instructions for your setup, including how to add the cron job etc.? Largely curious as I’m trying to create a specific VLAN that bypasses Speedify as well, and I’m encountering the same problem as you where, eth1 in my case, disappears from the routing table when it gets added to BYP1, which impacts Speedify when it tries to enumerate connections.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/timirvin'><span itemprop='name'>timirvin</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-11T02:50:38Z' class='post-time'>
                    December 11, 2023,  2:50am
                  </time>
                  <meta itemprop='dateModified' content='2023-12-11T02:50:38Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Here are my notes on this solution.</p><aside class="onebox githubgist" data-onebox-src="https://gist.github.com/irvintim/45651e6da37a616597d476f90a93c990">
  <header class="source">

      <a href="https://gist.github.com/irvintim/45651e6da37a616597d476f90a93c990" target="_blank" rel="noopener nofollow ugc">gist.github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://gist.github.com/irvintim/45651e6da37a616597d476f90a93c990" target="_blank" rel="noopener nofollow ugc">https://gist.github.com/irvintim/45651e6da37a616597d476f90a93c990</a></h4>

  <h5>SmoothWAN Speedify Bypass VIA VLAN.md</h5>
  <pre><code class="Markdown">## Problem
When using Speedify to avoid Starlink outages, the approach is effective except for certain sites, particularly TV streamers. These sites dislike the Internet Service Provider (ISP) or ISPs that the Speedify VPN transits. Consequently, these streamers and other sites, such as Etsy, block traffic that originates from the Speedify source address.

## Solution
To address this issue, create a separate VLAN and corresponding Wi-Fi network that specifically utilizes the Starlink gateway, bypassing Speedify. TVs can connect to this dedicated Wi-Fi network to avoid Speedify blocks, and other devices can switch to this network as needed to circumvent the blocks.

## Architecture
### Router:
SmoothWAN (OpenWRT) is running on a dedicated Single Board Computer (SBC) with multiple GigE Ethernet ports and an onboard cellular modem.
### ISPs:</code></pre>
    This file has been truncated. <a href="https://gist.github.com/irvintim/45651e6da37a616597d476f90a93c990" target="_blank" rel="noopener nofollow ugc">show original</a>

<p>
</p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/velocity7'><span itemprop='name'>velocity7</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-11T03:31:18Z' class='post-time'>
                    December 11, 2023,  3:31am
                  </time>
                  <meta itemprop='dateModified' content='2023-12-11T03:31:18Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Looks like this works. I should probably note that in my case, I had a second ethernet adapter that acts as a totally different subnet, and it ended up being that I had to add the following on top of your existing instructions:</p>
<p>In Network → Routing:</p>
<ol>
<li>When adding the IPv4 rule from the original instructions, make sure that the device is pointing towards the second ethernet adapter, not “lan” or “br-lan”.</li>
</ol>
<p>In Network → Firewall:</p>
<ol>
<li>Make sure the second ethernet adapter is not in the same firewall category as “lan”.</li>
<li>Add a firewall rule called “lan_cable” which points towards the second ethernet adapter as the device, set input/output/forward to accept.</li>
<li>Add a second firewall rule called “cable” which points towards PortOne (eth1) device, with input/output/forward at defaults, masquerading/MSS clamping checked, and “allow forward from source zones” set to “lan_cable”.</li>
</ol>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/velocity7'><span itemprop='name'>velocity7</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-13T07:14:17Z' class='post-time'>
                    December 13, 2023,  7:14am
                  </time>
                  <meta itemprop='dateModified' content='2023-12-13T08:36:08Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hey <a class="mention" href="https://smoothwan.discourse.group/u/timirvin">@timirvin</a> , just as an update… it seems I have an extreme corner case that is blocking the ability for me to use BYP1:</p>
<ol>
<li>eth1 loses connectivity to cable internet (interface still up via Technicolor TC4400)</li>
<li>Speedify eventually flags connection as down</li>
<li>When eth1 regains connectivity, Speedify doesn’t pick it up and even <em>removes</em> it from the list of connections</li>
<li>Only way to recover from this is to restart eth1 interface</li>
</ol>
<p>Now, this has created a situation where if eth1 is on BYP1, even if I restart it, and even if the entry was re-added back to the regular ip route table, Speedify still doesn’t pick it up unless I restart Speedify.</p>
<p>On a sidenote, would you happen to have a good idea how to get the router to recover eth1 in this particular scenario, regardless of whether it was on BYP1? Or would that be more a question for <a class="mention" href="https://smoothwan.discourse.group/u/talalm">@TalalM</a> ?</p>
<p>EDIT: So I can recover eth1 by adding the following cronjob:</p>
<pre><code class="lang-auto">* * * * * /root/checketh1.sh
</code></pre>
<pre><code class="lang-auto">#!/bin/sh
  
checketh1() {
    if ping -I eth1 google.com -w 2 &gt; /dev/null; then
        :
    else
        logger "disconnected, restarting eth1"
        ifdown PortOne
        sleep 3
        ifup PortOne
    fi
}

checketh1
</code></pre>
<p>Now I’m stuck figuring out why Speedify doesn’t detect eth1 when it’s on BYP1, even after it’s been restarted and even when I run the following command and it works:</p>
<pre><code class="lang-auto">ping -I eth1 google.com -w 2
</code></pre>
<p>So at this point I’m left waiting for <a class="mention" href="https://smoothwan.discourse.group/u/talalm">@TalalM</a> to hopefully come up with a solution where we can add eth0 or eth1 to a bypass table, without it being removed from the main table (and thus impacting Speedify when it enumerates)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_10' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://smoothwan.discourse.group/u/TalalM'><span itemprop='name'>TalalM</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-12-20T03:59:19Z' class='post-time'>
                    December 20, 2023,  3:59am
                  </time>
                  <meta itemprop='dateModified' content='2023-12-20T03:59:19Z'>
              <span itemprop='position'>10</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi, thanks for the feedback, next version will have a UI and will rely completely on firewall markings (L3), not routes which will solve the many issues discussed here.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    <div id="related-topics" class="more-topics__list " role="complementary" aria-labelledby="related-topics-title">
  <h3 id="related-topics-title" class="more-topics__list-title">
    Related topics
  </h3>
  <div class="topic-list-container" itemscope itemtype='http://schema.org/ItemList'>
    <meta itemprop='itemListOrder' content='http://schema.org/ItemListOrderDescending'>
    <table class='topic-list'>
      <thead>
        <tr>
          <th>Topic</th>
          <th></th>
          <th class="replies">Replies</th>
          <th class="views">Views</th>
          <th>Activity</th>
        </tr>
      </thead>
      <tbody>
          <tr class="topic-list-item" id="topic-list-item-111">
            <td class="main-link" itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
              <meta itemprop='position' content='1'>
              <span class="link-top-line">
                <a itemprop='url' href='../forwarding-and-policy-to-router-behind-smoothwan-router/111.html' class='title raw-link raw-topic-link'>Forwarding and policy to router behind SmoothWAN router</a>
              </span>
              <div class="link-bottom-line">
                  <a href='../../c/help/4.html' class='badge-wrapper bullet'>
                    <span class='badge-category-bg' style='background-color: #94f5ce'></span>
                    <span class='badge-category clear-badge'>
                      <span class='category-name'>Help</span>
                    </span>
                  </a>
                  <div class="discourse-tags">
                  </div>
              </div>
            </td>
            <td class="replies">
              <span class='posts' title='posts'>3</span>
            </td>
            <td class="views">
              <span class='views' title='views'>117</span>
            </td>
            <td>
              April 10, 2024
            </td>
          </tr>
          <tr class="topic-list-item" id="topic-list-item-41">
            <td class="main-link" itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
              <meta itemprop='position' content='2'>
              <span class="link-top-line">
                <a itemprop='url' href='../connect-directly-to-connection-without-speedify/41.html' class='title raw-link raw-topic-link'>Connect directly to connection without speedify</a>
              </span>
              <div class="link-bottom-line">
                  <a href='../../c/help/4.html' class='badge-wrapper bullet'>
                    <span class='badge-category-bg' style='background-color: #94f5ce'></span>
                    <span class='badge-category clear-badge'>
                      <span class='category-name'>Help</span>
                    </span>
                  </a>
                  <div class="discourse-tags">
                  </div>
              </div>
            </td>
            <td class="replies">
              <span class='posts' title='posts'>5</span>
            </td>
            <td class="views">
              <span class='views' title='views'>276</span>
            </td>
            <td>
              June 15, 2024
            </td>
          </tr>
          <tr class="topic-list-item" id="topic-list-item-148">
            <td class="main-link" itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
              <meta itemprop='position' content='3'>
              <span class="link-top-line">
                <a itemprop='url' href='../dhcp-relay-help-needed/148.html' class='title raw-link raw-topic-link'>DHCP relay help needed</a>
              </span>
              <div class="link-bottom-line">
                  <a href='../../c/help/4.html' class='badge-wrapper bullet'>
                    <span class='badge-category-bg' style='background-color: #94f5ce'></span>
                    <span class='badge-category clear-badge'>
                      <span class='category-name'>Help</span>
                    </span>
                  </a>
                  <div class="discourse-tags">
                  </div>
              </div>
            </td>
            <td class="replies">
              <span class='posts' title='posts'>2</span>
            </td>
            <td class="views">
              <span class='views' title='views'>47</span>
            </td>
            <td>
              May 4, 2024
            </td>
          </tr>
          <tr class="topic-list-item" id="topic-list-item-58">
            <td class="main-link" itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
              <meta itemprop='position' content='4'>
              <span class="link-top-line">
                <a itemprop='url' href='../firewall-wan-input-should-be-reject-but-default-was-accept/58.html' class='title raw-link raw-topic-link'>Firewall wan Input should be reject but default was accept</a>
              </span>
              <div class="link-bottom-line">
                  <a href='../../c/help/4.html' class='badge-wrapper bullet'>
                    <span class='badge-category-bg' style='background-color: #94f5ce'></span>
                    <span class='badge-category clear-badge'>
                      <span class='category-name'>Help</span>
                    </span>
                  </a>
                  <div class="discourse-tags">
                  </div>
              </div>
            </td>
            <td class="replies">
              <span class='posts' title='posts'>1</span>
            </td>
            <td class="views">
              <span class='views' title='views'>123</span>
            </td>
            <td>
              April 20, 2023
            </td>
          </tr>
          <tr class="topic-list-item" id="topic-list-item-66">
            <td class="main-link" itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
              <meta itemprop='position' content='5'>
              <span class="link-top-line">
                <a itemprop='url' href='../port-forward-from-one-wan/66.html' class='title raw-link raw-topic-link'>Port forward from one WAN?</a>
              </span>
              <div class="link-bottom-line">
                  <a href='../../c/help/4.html' class='badge-wrapper bullet'>
                    <span class='badge-category-bg' style='background-color: #94f5ce'></span>
                    <span class='badge-category clear-badge'>
                      <span class='category-name'>Help</span>
                    </span>
                  </a>
                  <div class="discourse-tags">
                  </div>
              </div>
            </td>
            <td class="replies">
              <span class='posts' title='posts'>1</span>
            </td>
            <td class="views">
              <span class='views' title='views'>139</span>
            </td>
            <td>
              May 12, 2023
            </td>
          </tr>
      </tbody>
    </table>
  </div>
</div>





    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://smoothwan.discourse.group/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  

<!-- Mirrored from smoothwan.discourse.group/t/bypass-speedify-for-specific-v-lan/103 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Dec 2024 17:51:27 GMT -->
</html>
